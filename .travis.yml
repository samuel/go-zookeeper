language: go
go:
  - 1.4.2
jdk:
  - oraclejdk8

addons:
  apt:
    packages:
      - oracle-java8-installer

sudo: false

branches:
  only:
    - master

before_install:
  - wget http://apache.claz.org/zookeeper/zookeeper-3.4.7/zookeeper-3.4.7.tar.gz
  - tar -zxvf zookeeper*tar.gz

script:
  - go build ./...
  - go fmt ./...
  - go get golang.org/x/tools/cmd/vet
  - go vet ./...
  - go test -i -race ./...
  - go test -v -race ./...
